{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/plate.obj","webpack:///./src/plate.mtl","webpack:///./src/mount-stone.obj","webpack:///./src/mount-stone.mtl","webpack:///./src/river.obj","webpack:///./src/river.mtl","webpack:///./src/pazzles.obj","webpack:///./src/pazzles.mtl","webpack:///./src/Island.png","webpack:///./src/scripts/objects/OBJLoader.js","webpack:///./src/scripts/contrlos/Orbit.js","webpack:///./src/scripts/objects/MTLLoader.js","webpack:///./src/scripts/mesh-helper.js","webpack:///./src/scripts/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","OBJLoader","object_pattern","material_library_pattern","material_use_pattern","map_use_pattern","ParserState","state","objects","vertices","normals","colors","uvs","materialLibraries","startObject","fromDeclaration","this","previousMaterial","currentMaterial","undefined","_finalize","geometry","materials","smooth","startMaterial","libraries","previous","inherited","groupCount","index","material","mtllib","Array","isArray","groupStart","groupEnd","clone","cloned","end","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","a","b","src","dst","addVertexPoint","addVertexLine","addNormal","addColor","addUV","addUVLine","addFace","ua","ub","uc","na","nb","nc","vLen","ia","ib","ic","uvLen","nLen","addPointGeometry","type","vi","addLineGeometry","uvi","manager","Loader","assign","constructor","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","text","parse","setMaterials","console","time","indexOf","replace","lines","split","line","lineFirstChar","trimLeft","trim","charAt","parseFloat","vertexData","substr","faceVertices","jl","vertex","vertexParts","v1","v2","v3","lineParts","substring","lineVertices","lineUVs","li","llen","parts","pointData","exec","test","warn","toLowerCase","container","Group","concat","isLine","isPoints","hasVertexColors","buffergeometry","BufferGeometry","setAttribute","Float32BufferAttribute","computeVertexNormals","mesh","createdMaterials","miLen","sourceMaterial","LineBasicMaterial","PointsMaterial","materialPoints","size","sizeAttenuation","Material","copy","color","map","materialLine","MeshPhongMaterial","flatShading","vertexColors","VertexColors","NoColors","addGroup","LineSegments","Points","Mesh","add","timeEnd","OrbitControls","domElement","offset","quat","quatInverse","lastPosition","lastQuaternion","document","error","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","STATE","NONE","Quaternion","setFromUnitVectors","up","inverse","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","addScaledVector","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","log","v","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","preventDefault","focus","button","ctrlKey","metaKey","shiftKey","handleMouseDownDolly","addEventListener","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tabIndex","EventDispatcher","MapControls","MTLLoader","loadObj","mtl","obj","Promise","resolve","preload","objLoader","traverse","child","THREE","forEach","mat","shininess","LoaderUtils","extractUrlBase","setMaterialOptions","materialOptions","info","delimiter_pattern","materialsInfo","pos","ss","materialCreator","MaterialCreator","resourcePath","setCrossOrigin","crossOrigin","setManager","baseUrl","options","materialsArray","nameLookup","side","FrontSide","wrap","RepeatWrapping","convert","converted","mn","covmat","prop","save","lprop","normalizeRGB","ignoreZeroRGBs","getIndex","materialName","getAsArray","createMaterial_","params","setMapForType","mapType","texParams","getTextureParams","loadTexture","repeat","wrapS","wrapT","Color","fromArray","specular","emissive","transparent","opacity","invertTrProperty","matParams","items","bumpScale","join","mapping","texture","DefaultLoadingManager","getHandler","TextureLoader","main","1","2","4","5","6","9","10","11","14","15","16","17","19","3","7","8","12","13","18","init","onWindowResize","looper","render","renderer","scene","camera","innerWidth","innerHeight","background","pointLightBottom","pointLight","fog","sun","character","then","plateMesh","pazzlesMTL","pazzlesOBJ","pazzlesMesh","includes","childNumber","pazzles","paintPazzles","initPazzles","stoneMTL","stoneOBJ","stoneMesh","riverMTL","riverOBJ","riverMesh","setPixelRatio","devicePixelRatio","setSize","body","appendChild","controls","Interaction","GUI","aspect","pazzlesColors","number","newMaterial","setHex","pazzleAction","pazzle","visible","ACTIONS","cubeAction","initial","z","values","ontouchstart","on","absPos","callback","requestAnimationFrame","myMesh","computeBoundingBox","boundingBox","applyMatrix4","matrixWorld"],"mappings":"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","file":"js/app.60954312.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([19,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"src/plate.obj\";","module.exports = __webpack_public_path__ + \"src/plate.mtl\";","module.exports = __webpack_public_path__ + \"src/mount-stone.obj\";","module.exports = __webpack_public_path__ + \"src/mount-stone.mtl\";","module.exports = __webpack_public_path__ + \"src/river.obj\";","module.exports = __webpack_public_path__ + \"src/river.mtl\";","module.exports = __webpack_public_path__ + \"src/pazzles.obj\";","module.exports = __webpack_public_path__ + \"src/pazzles.mtl\";","module.exports = __webpack_public_path__ + \"src/Island.png\";","import {\n    BufferGeometry,\n    FileLoader,\n    Float32BufferAttribute,\n    Group,\n    LineBasicMaterial,\n    LineSegments,\n    Loader,\n    Material,\n    Mesh,\n    MeshPhongMaterial,\n    NoColors,\n    Points,\n    PointsMaterial,\n    VertexColors\n} from \"three\";\n\nvar OBJLoader = ( function () {\n\n    // o object_name | g group_name\n    var object_pattern = /^[og]\\s*(.+)?/;\n    // mtllib file_reference\n    var material_library_pattern = /^mtllib /;\n    // usemtl material_name\n    var material_use_pattern = /^usemtl /;\n    // usemap map_name\n    var map_use_pattern = /^usemap /;\n\n    function ParserState() {\n\n        var state = {\n            objects: [],\n            object: {},\n\n            vertices: [],\n            normals: [],\n            colors: [],\n            uvs: [],\n\n            materialLibraries: [],\n\n            startObject: function ( name, fromDeclaration ) {\n\n                // If the current object (initial from reset) is not from a g/o declaration in the parsed\n                // file. We need to use it for the first parsed g/o to keep things in sync.\n                if ( this.object && this.object.fromDeclaration === false ) {\n\n                    this.object.name = name;\n                    this.object.fromDeclaration = ( fromDeclaration !== false );\n                    return;\n\n                }\n\n                var previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n                if ( this.object && typeof this.object._finalize === 'function' ) {\n\n                    this.object._finalize( true );\n\n                }\n\n                this.object = {\n                    name: name || '',\n                    fromDeclaration: ( fromDeclaration !== false ),\n\n                    geometry: {\n                        vertices: [],\n                        normals: [],\n                        colors: [],\n                        uvs: []\n                    },\n                    materials: [],\n                    smooth: true,\n\n                    startMaterial: function ( name, libraries ) {\n\n                        var previous = this._finalize( false );\n\n                        // New usemtl declaration overwrites an inherited material, except if faces were declared\n                        // after the material, then it must be preserved for proper MultiMaterial continuation.\n                        if ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n                            this.materials.splice( previous.index, 1 );\n\n                        }\n\n                        var material = {\n                            index: this.materials.length,\n                            name: name || '',\n                            mtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n                            smooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n                            groupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n                            groupEnd: - 1,\n                            groupCount: - 1,\n                            inherited: false,\n\n                            clone: function ( index ) {\n\n                                var cloned = {\n                                    index: ( typeof index === 'number' ? index : this.index ),\n                                    name: this.name,\n                                    mtllib: this.mtllib,\n                                    smooth: this.smooth,\n                                    groupStart: 0,\n                                    groupEnd: - 1,\n                                    groupCount: - 1,\n                                    inherited: false\n                                };\n                                cloned.clone = this.clone.bind( cloned );\n                                return cloned;\n\n                            }\n                        };\n\n                        this.materials.push( material );\n\n                        return material;\n\n                    },\n\n                    currentMaterial: function () {\n\n                        if ( this.materials.length > 0 ) {\n\n                            return this.materials[ this.materials.length - 1 ];\n\n                        }\n\n                        return undefined;\n\n                    },\n\n                    _finalize: function ( end ) {\n\n                        var lastMultiMaterial = this.currentMaterial();\n                        if ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n                            lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n                            lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n                            lastMultiMaterial.inherited = false;\n\n                        }\n\n                        // Ignore objects tail materials if no face declarations followed them before a new o/g started.\n                        if ( end && this.materials.length > 1 ) {\n\n                            for ( var mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n                                if ( this.materials[ mi ].groupCount <= 0 ) {\n\n                                    this.materials.splice( mi, 1 );\n\n                                }\n\n                            }\n\n                        }\n\n                        // Guarantee at least one empty material, this makes the creation later more straight forward.\n                        if ( end && this.materials.length === 0 ) {\n\n                            this.materials.push( {\n                                name: '',\n                                smooth: this.smooth\n                            } );\n\n                        }\n\n                        return lastMultiMaterial;\n\n                    }\n                };\n\n                // Inherit previous objects material.\n                // Spec tells us that a declared material must be set to all objects until a new material is declared.\n                // If a usemtl declaration is encountered while this new object is being parsed, it will\n                // overwrite the inherited material. Exception being that there was already face declarations\n                // to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n                if ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n                    var declared = previousMaterial.clone( 0 );\n                    declared.inherited = true;\n                    this.object.materials.push( declared );\n\n                }\n\n                this.objects.push( this.object );\n\n            },\n\n            finalize: function () {\n\n                if ( this.object && typeof this.object._finalize === 'function' ) {\n\n                    this.object._finalize( true );\n\n                }\n\n            },\n\n            parseVertexIndex: function ( value, len ) {\n\n                var index = parseInt( value, 10 );\n                return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n            },\n\n            parseNormalIndex: function ( value, len ) {\n\n                var index = parseInt( value, 10 );\n                return ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n            },\n\n            parseUVIndex: function ( value, len ) {\n\n                var index = parseInt( value, 10 );\n                return ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n            },\n\n            addVertex: function ( a, b, c ) {\n\n                var src = this.vertices;\n                var dst = this.object.geometry.vertices;\n\n                dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n                dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n                dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n            },\n\n            addVertexPoint: function ( a ) {\n\n                var src = this.vertices;\n                var dst = this.object.geometry.vertices;\n\n                dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n            },\n\n            addVertexLine: function ( a ) {\n\n                var src = this.vertices;\n                var dst = this.object.geometry.vertices;\n\n                dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n            },\n\n            addNormal: function ( a, b, c ) {\n\n                var src = this.normals;\n                var dst = this.object.geometry.normals;\n\n                dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n                dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n                dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n            },\n\n            addColor: function ( a, b, c ) {\n\n                var src = this.colors;\n                var dst = this.object.geometry.colors;\n\n                dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n                dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n                dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n            },\n\n            addUV: function ( a, b, c ) {\n\n                var src = this.uvs;\n                var dst = this.object.geometry.uvs;\n\n                dst.push( src[ a + 0 ], src[ a + 1 ] );\n                dst.push( src[ b + 0 ], src[ b + 1 ] );\n                dst.push( src[ c + 0 ], src[ c + 1 ] );\n\n            },\n\n            addUVLine: function ( a ) {\n\n                var src = this.uvs;\n                var dst = this.object.geometry.uvs;\n\n                dst.push( src[ a + 0 ], src[ a + 1 ] );\n\n            },\n\n            addFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n                var vLen = this.vertices.length;\n\n                var ia = this.parseVertexIndex( a, vLen );\n                var ib = this.parseVertexIndex( b, vLen );\n                var ic = this.parseVertexIndex( c, vLen );\n\n                this.addVertex( ia, ib, ic );\n\n                if ( this.colors.length > 0 ) {\n\n                    this.addColor( ia, ib, ic );\n\n                }\n\n                if ( ua !== undefined && ua !== '' ) {\n\n                    var uvLen = this.uvs.length;\n                    ia = this.parseUVIndex( ua, uvLen );\n                    ib = this.parseUVIndex( ub, uvLen );\n                    ic = this.parseUVIndex( uc, uvLen );\n                    this.addUV( ia, ib, ic );\n\n                }\n\n                if ( na !== undefined && na !== '' ) {\n\n                    // Normals are many times the same. If so, skip function call and parseInt.\n                    var nLen = this.normals.length;\n                    ia = this.parseNormalIndex( na, nLen );\n\n                    ib = na === nb ? ia : this.parseNormalIndex( nb, nLen );\n                    ic = na === nc ? ia : this.parseNormalIndex( nc, nLen );\n\n                    this.addNormal( ia, ib, ic );\n\n                }\n\n            },\n\n            addPointGeometry: function ( vertices ) {\n\n                this.object.geometry.type = 'Points';\n\n                var vLen = this.vertices.length;\n\n                for ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n                    this.addVertexPoint( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n                }\n\n            },\n\n            addLineGeometry: function ( vertices, uvs ) {\n\n                this.object.geometry.type = 'Line';\n\n                var vLen = this.vertices.length;\n                var uvLen = this.uvs.length;\n\n                for ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n                    this.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n                }\n\n                for ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n                    this.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n                }\n\n            }\n\n        };\n\n        state.startObject( '', false );\n\n        return state;\n\n    }\n\n    //\n\n    function OBJLoader( manager ) {\n\n        Loader.call( this, manager );\n\n        this.materials = null;\n\n    }\n\n    OBJLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n        constructor: OBJLoader,\n\n        load: function ( url, onLoad, onProgress, onError ) {\n\n            var scope = this;\n\n            var loader = new FileLoader( scope.manager );\n            loader.setPath( this.path );\n            loader.load( url, function ( text ) {\n\n                onLoad( scope.parse( text ) );\n\n            }, onProgress, onError );\n\n        },\n\n        setMaterials: function ( materials ) {\n\n            this.materials = materials;\n\n            return this;\n\n        },\n\n        parse: function ( text ) {\n\n            console.time( 'OBJLoader' );\n\n            var state = new ParserState();\n\n            if ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n                // This is faster than String.split with regex that splits on both\n                text = text.replace( /\\r\\n/g, '\\n' );\n\n            }\n\n            if ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n                // join lines separated by a line continuation character (\\)\n                text = text.replace( /\\\\\\n/g, '' );\n\n            }\n\n            var lines = text.split( '\\n' );\n            var line = '', lineFirstChar = '';\n            var lineLength = 0;\n            var result = [];\n\n            // Faster to just trim left side of the line. Use if available.\n            var trimLeft = ( typeof ''.trimLeft === 'function' );\n\n            for ( var i = 0, l = lines.length; i < l; i ++ ) {\n\n                line = lines[ i ];\n\n                line = trimLeft ? line.trimLeft() : line.trim();\n\n                lineLength = line.length;\n\n                if ( lineLength === 0 ) continue;\n\n                lineFirstChar = line.charAt( 0 );\n\n                // @todo invoke passed in handler if any\n                if ( lineFirstChar === '#' ) continue;\n\n                if ( lineFirstChar === 'v' ) {\n\n                    var data = line.split( /\\s+/ );\n\n                    switch ( data[ 0 ] ) {\n\n                        case 'v':\n                            state.vertices.push(\n                                parseFloat( data[ 1 ] ),\n                                parseFloat( data[ 2 ] ),\n                                parseFloat( data[ 3 ] )\n                            );\n                            if ( data.length >= 7 ) {\n\n                                state.colors.push(\n                                    parseFloat( data[ 4 ] ),\n                                    parseFloat( data[ 5 ] ),\n                                    parseFloat( data[ 6 ] )\n\n                                );\n\n                            }\n                            break;\n                        case 'vn':\n                            state.normals.push(\n                                parseFloat( data[ 1 ] ),\n                                parseFloat( data[ 2 ] ),\n                                parseFloat( data[ 3 ] )\n                            );\n                            break;\n                        case 'vt':\n                            state.uvs.push(\n                                parseFloat( data[ 1 ] ),\n                                parseFloat( data[ 2 ] )\n                            );\n                            break;\n\n                    }\n\n                } else if ( lineFirstChar === 'f' ) {\n\n                    var lineData = line.substr( 1 ).trim();\n                    var vertexData = lineData.split( /\\s+/ );\n                    var faceVertices = [];\n\n                    // Parse the face vertex data into an easy to work with format\n\n                    for ( var j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n                        var vertex = vertexData[ j ];\n\n                        if ( vertex.length > 0 ) {\n\n                            var vertexParts = vertex.split( '/' );\n                            faceVertices.push( vertexParts );\n\n                        }\n\n                    }\n\n                    // Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n                    var v1 = faceVertices[ 0 ];\n\n                    for ( var j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n                        var v2 = faceVertices[ j ];\n                        var v3 = faceVertices[ j + 1 ];\n\n                        state.addFace(\n                            v1[ 0 ], v2[ 0 ], v3[ 0 ],\n                            v1[ 1 ], v2[ 1 ], v3[ 1 ],\n                            v1[ 2 ], v2[ 2 ], v3[ 2 ]\n                        );\n\n                    }\n\n                } else if ( lineFirstChar === 'l' ) {\n\n                    var lineParts = line.substring( 1 ).trim().split( \" \" );\n                    var lineVertices = [], lineUVs = [];\n\n                    if ( line.indexOf( \"/\" ) === - 1 ) {\n\n                        lineVertices = lineParts;\n\n                    } else {\n\n                        for ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n                            var parts = lineParts[ li ].split( \"/\" );\n\n                            if ( parts[ 0 ] !== \"\" ) lineVertices.push( parts[ 0 ] );\n                            if ( parts[ 1 ] !== \"\" ) lineUVs.push( parts[ 1 ] );\n\n                        }\n\n                    }\n                    state.addLineGeometry( lineVertices, lineUVs );\n\n                } else if ( lineFirstChar === 'p' ) {\n\n                    var lineData = line.substr( 1 ).trim();\n                    var pointData = lineData.split( \" \" );\n\n                    state.addPointGeometry( pointData );\n\n                } else if ( ( result = object_pattern.exec( line ) ) !== null ) {\n\n                    // o object_name\n                    // or\n                    // g group_name\n\n                    // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                    // var name = result[ 0 ].substr( 1 ).trim();\n                    var name = ( \" \" + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\n\n                    state.startObject( name );\n\n                } else if ( material_use_pattern.test( line ) ) {\n\n                    // material\n\n                    state.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n                } else if ( material_library_pattern.test( line ) ) {\n\n                    // mtl file\n\n                    state.materialLibraries.push( line.substring( 7 ).trim() );\n\n                } else if ( map_use_pattern.test( line ) ) {\n\n                    // the line is parsed but ignored since the loader assumes textures are defined MTL files\n                    // (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n                    console.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n                } else if ( lineFirstChar === 's' ) {\n\n                    result = line.split( ' ' );\n\n                    // smooth shading\n\n                    // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n                    // but does not define a usemtl for each face set.\n                    // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n                    // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n                    // where explicit usemtl defines geometry groups.\n                    // Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n                    /*\n                     * http://paulbourke.net/dataformats/obj/\n                     * or\n                     * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\n                     *\n                     * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n                     * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n                     * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n                     * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n                     * than 0.\"\n                     */\n                    if ( result.length > 1 ) {\n\n                        var value = result[ 1 ].trim().toLowerCase();\n                        state.object.smooth = ( value !== '0' && value !== 'off' );\n\n                    } else {\n\n                        // ZBrush can produce \"s\" lines #11707\n                        state.object.smooth = true;\n\n                    }\n                    var material = state.object.currentMaterial();\n                    if ( material ) material.smooth = state.object.smooth;\n\n                } else {\n\n                    // Handle null terminated files without exception\n                    if ( line === '\\0' ) continue;\n\n                    console.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n                }\n\n            }\n\n            state.finalize();\n\n            var container = new Group();\n            container.materialLibraries = [].concat( state.materialLibraries );\n\n            for ( var i = 0, l = state.objects.length; i < l; i ++ ) {\n\n                var object = state.objects[ i ];\n                var geometry = object.geometry;\n                var materials = object.materials;\n                var isLine = ( geometry.type === 'Line' );\n                var isPoints = ( geometry.type === 'Points' );\n                var hasVertexColors = false;\n\n                // Skip o/g line declarations that did not follow with any faces\n                if ( geometry.vertices.length === 0 ) continue;\n\n                var buffergeometry = new BufferGeometry();\n\n                buffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n                if ( geometry.normals.length > 0 ) {\n\n                    buffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n                } else {\n\n                    buffergeometry.computeVertexNormals();\n\n                }\n\n                if ( geometry.colors.length > 0 ) {\n\n                    hasVertexColors = true;\n                    buffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n                }\n\n                if ( geometry.uvs.length > 0 ) {\n\n                    buffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n                }\n\n                // Create materials\n\n                var createdMaterials = [];\n\n                for ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n                    var sourceMaterial = materials[ mi ];\n                    var material = undefined;\n\n                    if ( this.materials !== null ) {\n\n                        material = this.materials.create( sourceMaterial.name );\n\n                        // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n                        if ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n                            var materialLine = new LineBasicMaterial();\n                            Material.prototype.copy.call( materialLine, material );\n                            materialLine.color.copy( material.color );\n                            material = materialLine;\n\n                        } else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n                            var materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n                            Material.prototype.copy.call( materialPoints, material );\n                            materialPoints.color.copy( material.color );\n                            materialPoints.map = material.map;\n                            material = materialPoints;\n\n                        }\n\n                    }\n\n                    if ( ! material ) {\n\n                        if ( isLine ) {\n\n                            material = new LineBasicMaterial();\n\n                        } else if ( isPoints ) {\n\n                            material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n                        } else {\n\n                            material = new MeshPhongMaterial();\n\n                        }\n\n                        material.name = sourceMaterial.name;\n\n                    }\n\n                    material.flatShading = sourceMaterial.smooth ? false : true;\n                    material.vertexColors = hasVertexColors ? VertexColors : NoColors;\n\n                    createdMaterials.push( material );\n\n                }\n\n                // Create mesh\n\n                var mesh;\n\n                if ( createdMaterials.length > 1 ) {\n\n                    for ( var mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n                        var sourceMaterial = materials[ mi ];\n                        buffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n                    }\n\n                    if ( isLine ) {\n\n                        mesh = new LineSegments( buffergeometry, createdMaterials );\n\n                    } else if ( isPoints ) {\n\n                        mesh = new Points( buffergeometry, createdMaterials );\n\n                    } else {\n\n                        mesh = new Mesh( buffergeometry, createdMaterials );\n\n                    }\n\n                } else {\n\n                    if ( isLine ) {\n\n                        mesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n                    } else if ( isPoints ) {\n\n                        mesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n                    } else {\n\n                        mesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n                    }\n\n                }\n\n                mesh.name = object.name;\n\n                container.add( mesh );\n\n            }\n\n            console.timeEnd( 'OBJLoader' );\n\n            return container;\n\n        }\n\n    } );\n\n    return OBJLoader;\n\n} )();\n\nexport { OBJLoader };\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from \"three\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n      offset.copy( position ).sub( scope.target );\n      \n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n  }\n  this.rotateLeft = function(angle) {\n    rotateLeft(angle);\n    console.log('asda')\n    scope.update();\n  }\n  this.rotateUp = function(angle) {\n    rotateUp(angle);\n    scope.update();\n  }\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n    \n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyIn( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tswitch ( scope.mouseButtons.LEFT ) {\n\n\t\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.mouseButtons.MIDDLE ) {\n\n\t\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.mouseButtons.RIGHT ) {\n\n\t\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\n\n\t// make sure element can receive keys.\n\n\tif ( scope.domElement.tabIndex === - 1 ) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };","/**\n * Loads a Wavefront .mtl file specifying materials\n *\n * @author angelxuanchang\n */\n\nimport {\n\tColor,\n\tDefaultLoadingManager,\n\tFileLoader,\n\tFrontSide,\n\tLoader,\n\tLoaderUtils,\n\tMeshPhongMaterial,\n\tRepeatWrapping,\n\tTextureLoader,\n\tVector2\n} from \"three\";\n\nvar MTLLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n};\n\nMTLLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MTLLoader,\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to load.\n\t */\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetMaterialOptions: function ( value ) {\n\n\t\tthis.materialOptions = value;\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @return {MTLLoader.MaterialCreator}\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to parse.\n\t */\n\tparse: function ( text, path ) {\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar info = {};\n\t\tvar delimiter_pattern = /\\s+/;\n\t\tvar materialsInfo = {};\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tvar line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar pos = line.indexOf( ' ' );\n\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' || key === 'ke' ) {\n\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.resourcePath || path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n} );\n\n/**\n * Create a new MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nMTLLoader.MaterialCreator = function ( baseUrl, options ) {\n\n\tthis.baseUrl = baseUrl || '';\n\tthis.options = options;\n\tthis.materialsInfo = {};\n\tthis.materials = {};\n\tthis.materialsArray = [];\n\tthis.nameLookup = {};\n\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : FrontSide;\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : RepeatWrapping;\n\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\tconstructor: MTLLoader.MaterialCreator,\n\n\tcrossOrigin: 'anonymous',\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetManager: function ( value ) {\n\n\t\tthis.manager = value;\n\n\t},\n\n\tsetMaterials: function ( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t},\n\n\tconvert: function ( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tvar converted = {};\n\n\t\tfor ( var mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tvar mat = materialsInfo[ mn ];\n\n\t\t\tvar covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( var prop in mat ) {\n\n\t\t\t\tvar save = true;\n\t\t\t\tvar value = mat[ prop ];\n\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t},\n\n\tpreload: function () {\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t},\n\n\tgetIndex: function ( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t},\n\n\tgetAsArray: function () {\n\n\t\tvar index = 0;\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t},\n\n\tcreate: function ( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tcreateMaterial_: function ( materialName ) {\n\n\t\t// Create material\n\n\t\tvar scope = this;\n\t\tvar mat = this.materialsInfo[ materialName ];\n\t\tvar params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tvar texParams = scope.getTextureParams( value, params );\n\t\t\tvar map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( var prop in mat ) {\n\n\t\t\tvar value = mat[ prop ];\n\t\t\tvar n;\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = new Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = new Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ke':\n\n\t\t\t\t\t// Emissive using RGB values\n\t\t\t\t\tparams.emissive = new Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( \"map\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( \"specularMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ke':\n\n\t\t\t\t\t// Emissive map\n\n\t\t\t\t\tsetMapForType( \"emissiveMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType( \"normalMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( \"bumpMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_d':\n\n\t\t\t\t\t// Alpha map\n\n\t\t\t\t\tsetMapForType( \"alphaMap\", value );\n\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( n < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( this.options && this.options.invertTrProperty ) n = 1 - n;\n\n\t\t\t\t\tif ( n > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tgetTextureParams: function ( value, matParams ) {\n\n\t\tvar texParams = {\n\n\t\t\tscale: new Vector2( 1, 1 ),\n\t\t\toffset: new Vector2( 0, 0 )\n\n\t\t };\n\n\t\tvar items = value.split( /\\s+/ );\n\t\tvar pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t},\n\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tvar texture;\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : DefaultLoadingManager;\n\t\tvar loader = manager.getHandler( url );\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n};\n\nexport { MTLLoader };","import { MTLLoader } from \"./objects/MTLLoader\";\nimport { OBJLoader } from \"./objects/OBJLoader\";\nimport * as THREE from \"three\";\n\n\nexport function loadObj(mtl, obj) {\n  return new Promise((resolve) => {\n    var mtlLoader = new MTLLoader();\n\n    mtlLoader.load(mtl, materials => {\n      materials.preload();\n\n      var objLoader = new OBJLoader();\n      objLoader.setMaterials(materials);\n\n      objLoader.load(obj, object => {\n        object.traverse(function(child) {\n          if (child instanceof THREE.Mesh) {\n            if (child.material instanceof Array) {\n                child.material.forEach(mat => (mat.shininess = 0));\n              } else {\n                child.material.shininess = 0;\n              }\n          }\n        });\n        resolve(object);\n      });\n    });\n  });\n}\n","import \"../styles/index.scss\";\n\nimport * as THREE from \"three\";\nimport { GUI } from \"dat.gui\";\nimport { Interaction } from \"three.interaction\";\nimport { SpriteText2D, textAlign } from \"three-text2d\";\nimport obj from \"../plate.obj\";\nimport mtl from \"../plate.mtl\";\nimport stoneOBJ from \"../mount-stone.obj\";\nimport stoneMTL from \"../mount-stone.mtl\";\nimport riverOBJ from \"../river.obj\";\nimport riverMTL from \"../river.mtl\";\nimport pazzlesOBJ from \"../pazzles.obj\";\nimport pazzlesMTL from \"../pazzles.mtl\";\nimport \"../Island.png\";\nimport { OBJLoader } from \"./objects/OBJLoader\";\nimport { OrbitControls } from \"./contrlos/Orbit\";\nimport { MTLLoader } from \"./objects/MTLLoader\";\nimport { loadObj } from \"./mesh-helper\";\n\nclass Main {\n  // main entities\n  camera;\n  controls;\n  scene;\n  renderer;\n  pazzles = {};\n  ACTIONS = {};\n\n  constructor() {\n    this.init();\n\n    window.addEventListener(\"resize\", this.onWindowResize.bind(this), false);\n\n    this.looper();\n  }\n\n  render() {\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  init() {\n    this.camera = new THREE.PerspectiveCamera(\n      45,\n      window.innerWidth / window.innerHeight,\n      1,\n      1000\n    );\n    // this.camera.position.set( 50, 34, 15 );\n    this.camera.position.set(50, 10, 15);\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(0xbfe3dd);\n\n    this.scene.add(new THREE.AmbientLight(0x404040));\n    this.pointLightBottom = new THREE.DirectionalLight(0xffffff);\n    this.pointLight = new THREE.DirectionalLight(0xffffff);\n    this.scene.fog = new THREE.FogExp2(0xbfe3dd, 0.002);\n    this.pointLight.position.set(-50, 70, -50);\n    this.pointLightBottom.position.set(15, -50, -80);\n    this.scene.add(this.pointLight);\n    this.scene.add(this.pointLightBottom);\n\n    var material = new THREE.MeshBasicMaterial({ color: 0xffffff });\n    var geometry = new THREE.DodecahedronGeometry(10, 1);\n    this.sun = new THREE.Mesh(geometry, material);\n    this.sun.position.copy(this.pointLight.position);\n    this.scene.add(this.sun);\n\n    this.character = new THREE.Mesh(new THREE.BoxGeometry(2,2,2), new THREE.MeshBasicMaterial({color: 0xff0000}))\n    this.character.position.y = 1\n    this.character.position.x = -20\n    this.scene.add(this.character)\n    const plate$ = loadObj(mtl, obj);\n    plate$.then(plateMesh => {\n      plateMesh.scale.set(10, 10, 10);\n      this.scene.add(plateMesh);\n    })\n\n    const pazzles$ = loadObj(pazzlesMTL, pazzlesOBJ);\n    pazzles$.then(pazzlesMesh => {\n      pazzlesMesh.scale.set(10, 10, 10);\n      this.scene.add(pazzlesMesh);\n\n      pazzlesMesh.traverse((child) => {\n        if (child instanceof THREE.Mesh && !child.name.includes('border')) {\n          const childNumber = child.name.split('_I')[0];\n          this.pazzles[childNumber] = child\n        }\n      })\n      return;\n    }).then(() => {\n      this.paintPazzles()\n      this.initPazzles()\n    })\n\n    const stone$ = loadObj(stoneMTL, stoneOBJ);\n    stone$.then(stoneMesh => {\n      stoneMesh.scale.set(8, 8, 8);\n      stoneMesh.position.set(-15, 0, 10);\n      this.scene.add(stoneMesh);\n    })\n\n    const river$ = loadObj(riverMTL, riverOBJ);\n    river$.then(riverMesh => {\n      riverMesh.scale.set(10, 10, 10);\n      riverMesh.position.x = -15;\n      this.scene.add(riverMesh);\n    })\n\n    this.renderer = new THREE.WebGLRenderer();\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(this.renderer.domElement);\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n\n    this.controls.maxPolarAngle = Math.PI / 2.05;\n    // this.controls.addEventListener('change', this.render.bind(this));\n\n    this.controls.enableZoom = true;\n    this.controls.enablePan = false;\n    this.controls.zoomSpeed = 2;\n    this.controls.enabled = true;\n    const interaction = new Interaction(this.renderer, this.scene, this.camera);\n    var gui = new GUI();\n  }\n\n  onWindowResize() {\n    this.camera.aspect = window.innerWidth / window.innerHeight;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.render();\n  }\n\n  pazzlesColors = {\n    1: 0x4FC3F7, 2: 0x4FC3F7, 4: 0x4FC3F7, 5: 0x4FC3F7, 6: 0x4FC3F7, 9: 0x4FC3F7, 10: 0x4FC3F7, 11: 0x4FC3F7, 14: 0x4FC3F7,\n    15: 0xFFD54F, 16: 0xFFD54F, 17: 0xFFD54F, 19: 0xFFD54F,\n    3: 0xFF8A65, 7: 0xFF8A65, 8: 0xFF8A65, 12: 0xFF8A65, 13: 0xFF8A65, 18: 0xFF8A65\n  }\n\n  paintPazzles() {\n    Object.keys(this.pazzlesColors).forEach(number => {\n      const newMaterial = this.pazzles[number].material.clone()\n      newMaterial.color.setHex(this.pazzlesColors[number])\n      this.pazzles[number].material = newMaterial\n    })\n  }\n  pazzleAction(name, pazzle) {\n    pazzle.position.y -= 0.05\n    if (pazzle.position.y <= -1) {\n      pazzle.material.visible = false\n      delete this.ACTIONS[name]\n    }\n  }\n  cubeAction(position, initial) {\n    \n    if(position.x > initial.x && position.x > this.character.position.x) {\n      this.character.position.x += (position.x - initial.x)/20;\n    }\n    \n    if(position.z > initial.z && position.z > this.character.position.z) {\n      this.character.position.z += (position.z - initial.z)/20;\n    }\n\n    if(position.x < initial.x && position.x < this.character.position.x) {\n      this.character.position.x -= (initial.x - position.x)/20;\n    }\n    \n    if(position.z < initial.z && position.z < this.character.position.z) {\n      this.character.position.z -= (initial.z - position.z)/20;\n    }\n    \n    // if(position.x > this.character.position.x && position.y > this.character.position.y && position.z > this.character.position.z) {\n    //   delete this.ACTIONS['cube']\n    // }\n  }\n  initPazzles() {\n    Object.values(this.pazzles).forEach(pazzle => {\n      const event = document.ontouchstart !== null ? 'click' : 'touchstart';\n      pazzle.on(event, () => {\n        console.log(this.absPos(pazzle), this.character.position.clone())\n        delete this.ACTIONS['cube'];\n        this.ACTIONS['cube'] = this.cubeAction.bind(this, this.absPos(pazzle), this.character.position.clone())\n        this.ACTIONS[pazzle.name] = this.pazzleAction.bind(this, name, pazzle);\n      })\n    })\n  }\n\n  looper() {\n    // if(this.controls.getAzimuthalAngle() <= Math.PI/2.05){\n    //   this.controls.rotateLeft(-0.006)\n    // }\n    // if(this.controls.getPolarAngle() >= Math.PI/4.5 ) {\n    //   this.controls.rotateUp(0.01)\n    // }\n    // this.controls.rotateLeft(0.01)\n\n    Object.values(this.ACTIONS).forEach(callback => callback())\n\n    this.render();\n    requestAnimationFrame(() => this.looper());\n  }\n\n\n\n  absPos(myMesh) {\n    myMesh.geometry.computeBoundingBox();\n\n    var boundingBox = myMesh.geometry.boundingBox;\n    console.log()\n    // boundingBox.min.multiplyScalar(10) // initial scale of this fucking obj\n    // boundingBox.max.multiplyScalar(10) // the same for max ...\n    var position = new THREE.Vector3();\n    position.subVectors(boundingBox.max, boundingBox.min);\n    position.multiplyScalar(0.5);\n    position.add(boundingBox.min);\n\n    position.applyMatrix4(myMesh.matrixWorld);\n\n    return position\n    // console.log(position)\n  }\n}\n\nconst main = new Main();\nconsole.log(main);\n"],"sourceRoot":""}